---
layout: default
title: 記事を投稿する
---

<h2>記事を投稿する</h2>

<p>
  このサイトへの記事投稿は、今のところ次の 2 通りで受け付けます。
</p>

<h3>投稿方法 1（おすすめ）：GitHub から直接記事を書く</h3>

<p>
  GitHub アカウントをお持ちの方は、下記のフォームに記事情報を入力して、
  <code>_posts</code> フォルダに新しい記事ファイルを作成できます。
</p>

<div style="background: #f5f5f5; padding: 15px; border-radius: 5px; margin: 20px 0;">
  <h4>📝 新規記事フォーム</h4>

  <div style="margin: 10px 0;">
    <label for="filename-input"><strong>ファイル名</strong> （英数字・ハイフン・アンダースコアのみ、例: my-first-article）:</label><br>
    <input type="text" id="filename-input" placeholder="my-first-article" style="width: 100%; max-width: 500px; padding: 8px; margin: 5px 0; box-sizing: border-box;">
    <small style="color: #666;"><br />※ .md 拡張子は自動付与されます。日付はシステムが自動設定します。</small>
  </div>

  <div style="margin: 10px 0;">
    <label for="title-input"><strong>タイトル</strong> （記事のタイトル）:</label><br>
    <input type="text" id="title-input" placeholder="HSP で簡単な計算機を作る" style="width: 100%; max-width: 500px; padding: 8px; margin: 5px 0; box-sizing: border-box;">
  </div>

  <div style="margin: 10px 0;">
    <label for="author-input"><strong>著者名</strong> （ペンネーム等）:</label><br>
    <input type="text" id="author-input" placeholder="******" style="width: 100%; max-width: 500px; padding: 8px; margin: 5px 0; box-sizing: border-box;">
  </div>

  <div style="margin: 10px 0;">
    <label for="summary-input"><strong>概要</strong> :</label><br>
    <textarea id="summary-input" placeholder="この記事では、HSPの基本的な機能を使って簡単な計算機を作る方法を紹介します。" style="width: 100%; max-width: 500px; height: 80px; padding: 8px; margin: 5px 0; box-sizing: border-box;"></textarea>
  </div>

  <div style="margin: 10px 0;">
    <label><strong>タグ</strong> （推奨タグから選択 + 自由に追加可）:</label><br>
    <div style="background: #fff; padding: 10px; border: 1px solid #ddd; border-radius: 3px; margin: 5px 0; max-width: 500px;">

      <p style="font-size: 12px; color: #666; margin: 5px 0;"><strong>🎯 対象分野</strong></p>
      <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px; margin-bottom: 12px;">
        <label style="display: flex; align-items: center;"><input type="checkbox" name="tag" value="HSP3" style="margin-right: 5px;"> HSP3</label>
        <label style="display: flex; align-items: center;"><input type="checkbox" name="tag" value="ゲーム制作" style="margin-right: 5px;"> ゲーム制作</label>
        <label style="display: flex; align-items: center;"><input type="checkbox" name="tag" value="3D" style="margin-right: 5px;"> 3D</label>
        <label style="display: flex; align-items: center;"><input type="checkbox" name="tag" value="ライブラリ" style="margin-right: 5px;"> ライブラリ</label>
      </div>

      <p style="font-size: 12px; color: #666; margin: 5px 0;"><strong>📚 コンテンツタイプ</strong></p>
      <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px; margin-bottom: 12px;">
        <label style="display: flex; align-items: center;"><input type="checkbox" name="tag" value="Tips" style="margin-right: 5px;"> Tips</label>
        <label style="display: flex; align-items: center;"><input type="checkbox" name="tag" value="デバッグ" style="margin-right: 5px;"> デバッグ</label>
        <label style="display: flex; align-items: center;"><input type="checkbox" name="tag" value="作品紹介" style="margin-right: 5px;"> 作品紹介</label>
        <label style="display: flex; align-items: center;"><input type="checkbox" name="tag" value="募集" style="margin-right: 5px;"> 募集</label>
      </div>

      <p style="font-size: 12px; color: #666; margin: 5px 0;"><strong>📖 難易度</strong></p>
      <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px;">
        <label style="display: flex; align-items: center;"><input type="checkbox" name="tag" value="入門" style="margin-right: 5px;"> 入門</label>
        <label style="display: flex; align-items: center;"><input type="checkbox" name="tag" value="中級" style="margin-right: 5px;"> 中級</label>
        <label style="display: flex; align-items: center;"><input type="checkbox" name="tag" value="応用" style="margin-right: 5px;"> 応用</label>
      </div>
    </div>
    <label style="display: block; margin-top: 8px;">カスタムタグ（カンマ区切り）:</label>
    <input type="text" id="custom-tags-input" placeholder="例: 最適化, 初心者向け" style="width: 100%; max-width: 500px; padding: 8px; margin: 5px 0; box-sizing: border-box;">
    <small style="color: #666;">推奨タグ以外のタグを追加したい場合は、ここにカンマで区切って入力してください。</small>
  </div>

  <button id="post-button" class="post-primary-button">GitHub で新しい記事を作成</button>
</div>

<ul>
  <li>ファイル名は英数字、ハイフン（<code>-</code>）、アンダースコア（<code>_</code>）のみ使用できます。</li>
  <li>日付（<code>date</code>）と更新日時（<code>lastupdate</code>）は自動設定されます。</li>
  <li>公開後は `/publish` コマンドで自動マージされます。</li>
  <li>全ての要素は記事作成画面でも追加編集可能です</li>
</ul>

<hr>

<h3>投稿方法 2：Discussion で記事案を投げる</h3>

<p>
  GitHub に慣れていない方は、次の Discussion カテゴリに
  「記事にしたい内容」を書き込んでください。こちらで Markdown 化して取り込みます。
</p>

<p>
  <a class="post-secondary-link"
     href="https://github.com/Velgail/Hsp-Knowledge/discussions/categories/投稿受付">
    Discussion に記事案を投稿する
  </a>
</p>

<p>
  書いてもらえると助かる項目：
</p>

<ul>
  <li>記事タイトル（仮でOK）</li>
  <li>ペンネーム</li>
  <li>対象バージョン（例：HSP3.6）</li>
  <li>対象レベル（入門 / 中級 など）</li>
  <li>本文、または自分のブログ記事 URL</li>
</ul>

<script>
document.addEventListener('DOMContentLoaded', function () {
  var button = document.getElementById('post-button');
  if (!button) return;

  button.addEventListener('click', function() {
    // フォーム入力値を取得
    var filename = document.getElementById('filename-input').value.trim();
    var title = document.getElementById('title-input').value.trim();
    var author = document.getElementById('author-input').value.trim();
    var summary = document.getElementById('summary-input').value.trim();

    // バリデーション
    if (!filename) {
      alert('ファイル名を入力してください。');
      return;
    }

    // ファイル名のバリデーション: 英数字、ハイフン、アンダースコアのみ
    var filenameRegex = /^[a-zA-Z0-9_-]+$/;
    if (!filenameRegex.test(filename)) {
      alert('ファイル名は英数字、ハイフン（-）、アンダースコア（_）のみ使用できます。');
      return;
    }

    if (!title) {
      alert('タイトルを入力してください。');
      return;
    }

    if (!author) {
      alert('著者名を入力してください。');
      return;
    }

    // タグを取得（推奨タグとカスタムタグを組み合わせる）
    var selectedTags = [];
    var checkboxes = document.querySelectorAll('input[name="tag"]:checked');
    checkboxes.forEach(function(checkbox) {
      selectedTags.push(checkbox.value);
    });

    // カスタムタグを取得
    var customTagsInput = document.getElementById('custom-tags-input').value.trim();
    if (customTagsInput) {
      var customTags = customTagsInput.split(',').map(function(tag) {
        return tag.trim();
      }).filter(function(tag) {
        return tag.length > 0;
      });
      selectedTags = selectedTags.concat(customTags);
    }

    // タグがない場合は警告
    if (selectedTags.length === 0) {
      alert('最低1つ以上のタグを選択してください。');
      return;
    }

    // 現在の日付を取得 (YYYY-MM-DD 形式)
    var now = new Date();
    var year = now.getFullYear();
    var month = String(now.getMonth() + 1).padStart(2, '0');
    var day = String(now.getDate()).padStart(2, '0');
    var dateStr = year + '-' + month + '-' + day;

    // .md 拡張子なしでファイル名を結合
    var fullFilename = dateStr + '-' + filename + '.md';

    // タグを YAML 配列形式に変換
    var tagsYaml = '[' + selectedTags.map(function(tag) {
      return tag;
    }).join(', ') + ']';

    // Front Matter を生成（日付は記入しない、ボットが自動設定）
    var frontMatter = '---\n';
    frontMatter += 'layout: post\n';
    frontMatter += 'title: ' + title + '\n';
    frontMatter += 'author: ' + author + '\n';
    frontMatter += 'tags: ' + tagsYaml + '\n';
    frontMatter += 'summary: ' + summary + '\n';
    frontMatter += '---\n\n';
    frontMatter += '## はじめに\n\n';
    frontMatter += 'ここに記事の本文を書いてください。\n';

    // GitHub の Create File URL にリダイレクト
    var encodedValue = encodeURIComponent(frontMatter);
    var url = 'https://github.com/Velgail/HSP-Knowledge/new/main/_posts?filename=' + encodeURIComponent(fullFilename) + '&value=' + encodedValue;

    window.open(url, '_blank');
  });
});
</script>